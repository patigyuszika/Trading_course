<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSJ - Trading Course</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        background-color: #a8abb9;
        overflow-x: hidden;
        padding-top: 0;
    }

    @media (max-width: 767.98px) {
        body {
            padding-top: 60px;
        }
    }

    /* Mobile navbar line */
    .mobile-navbar {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(135deg, #2a2f42 0%, #1a1d29 50%, #2a2f42 100%);
        z-index: 1050;
        box-shadow: 0 4px 15px rgba(0,0,0,0.4);
        display: flex;
        align-items: center;
        padding: 0 20px;
        border-bottom: 2px solid #5c6a7f;
    }

    .mobile-navbar::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    }

    /* Hamburger menu button for mobile */
    .mobile-menu-toggle {
        display: none;
        position: fixed;
        top: 0;
        right: 20px;
        z-index: 1051;
        height: 60px;
        width: 60px;
        background: transparent;
        color: white;
        border: none;
        padding: 0;
        border-radius: 0;
        font-size: 1.4rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .mobile-menu-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
    }

    .mobile-menu-toggle:active {
        background: rgba(255, 255, 255, 0.2);
    }

    /* Navbar logo/title */
    .navbar-title {
        display: none;
        color: white;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 0;
        letter-spacing: 0.5px;
    }

    .navbar-title:hover {
        opacity: 0.8;
        transform: scale(1.02);
    }

    /* Sidebar styles */
    aside {
        background: linear-gradient(135deg, #2a2f42 0%, #1a1d29 50%, #2a2f42 100%) !important;
        transition: transform 0.3s ease;
    }

    /* Sidebar overlay for mobile */
    .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 1030;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    .sidebar-overlay.show {
        opacity: 1;
        pointer-events: auto;
    }

    /* Főgombok stílusa (Main, Basics, Psychology, stb.) */
    .main-menu-btn {
        font-weight: 600;
        font-size: 1.05rem;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
        border: none;
        background-color: transparent;
        cursor: pointer;
        min-height: 48px;
        display: flex;
        align-items: center;
    }

    .main-menu-btn:hover {
        background-color: rgba(255, 255, 255, 0.1);
        transform: translateX(4px);
    }

    .main-menu-btn:focus {
        box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
    }

    /* Almenü elemek stílusa */
    .submenu-item {
        font-size: 0.9rem;
        font-weight: 400;
        padding: 0.6rem 0.8rem;
        border-radius: 5px;
        transition: all 0.2s ease;
        opacity: 0.85;
        cursor: pointer;
        min-height: 44px;
        display: flex;
        align-items: center;
    }

    .submenu-item:hover {
        opacity: 1;
        background-color: rgba(255, 255, 255, 0.08);
        transform: translateX(3px);
        padding-left: 1rem;
    }

    /* Collapse konténer stílus */
    .submenu-container {
        border-left: 2px solid rgba(255, 255, 255, 0.2);
        margin-left: 0.5rem;
        padding-left: 0.5rem;
    }

    /* Flip kártya stílusok */
    .flip-card {
        background-color: transparent;
        perspective: 1000px;
        height: 350px;
        margin-bottom: 20px;
        cursor: pointer;
    }

    .flip-card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s;
        transform-style: preserve-3d;
    }

    .flip-card.flipped .flip-card-inner,
    .flip-card:hover .flip-card-inner {
        transform: rotateY(180deg);
    }

    .flip-card-front, .flip-card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        padding: 20px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .flip-card-front {
        background: linear-gradient(135deg, #7d8a9f 0%, #5c6a7f 100%);
        color: white;
    }

    .flip-card-back {
        background: linear-gradient(135deg, #8a97ab 0%, #6b7d94 100%);
        color: white;
        transform: rotateY(180deg);
    }

    .flip-card-back img {
        max-width: 100%;
        max-height: 200px;
        border-radius: 8px;
        margin-bottom: 10px;
        object-fit: cover;
    }

    .flip-card h3 {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 15px;
    }

    .flip-card p {
        font-size: 0.95rem;
        line-height: 1.5;
        text-align: left;
    }

    /* Mobile responsive styles */
    @media (max-width: 767.98px) {
        h1, h2, h3, h4, h5, h6 {
            scroll-margin-top: 60px;
        }

        .mobile-navbar {
            display: flex;
        }

        .navbar-title {
            display: block;
        }

        .mobile-menu-toggle {
            display: flex;
        }

        aside {
            position: fixed !important;
            top: 0;
            right: 0;
            height: 100vh;
            width: 85vw;
            max-width: 320px;
            z-index: 1040;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
            overflow-y: auto;
            box-shadow: -2px 0 10px rgba(0,0,0,0.3);
        }

        aside.show {
            transform: translateX(0);
        }

        .sidebar-overlay {
            display: block;
        }

        main {
            width: 100% !important;
            margin-left: 0 !important;
            padding: 20px 15px 20px !important;
            margin-top: 0;
        }

        .flip-card {
            height: 300px;
        }

        .flip-card h3 {
            font-size: 1.2rem;
        }

        .flip-card p {
            font-size: 0.85rem;
        }

        .flip-card-back img {
            max-height: 140px;
        }
    }

    /* Tablet styles */
    @media (min-width: 768px) and (max-width: 991.98px) {
        .mobile-navbar {
            display: none;
        }

        .mobile-menu-toggle {
            display: none;
        }

        .sr-content-image {
            max-width: 80% !important;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        aside {
            width: 35%;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        main {
            width: 65%;
            margin-left: 35%;
        }
    }

    /* Desktop styles */
    @media (min-width: 992px) {
        .mobile-navbar {
            display: none;
        }

        .mobile-menu-toggle {
            display: none;
        }

        .sr-content-image {
            max-width: 70% !important;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        aside {
            width: 25%;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        main {
            width: 75%;
            margin-left: 25%;
        }
    }

    /* Smooth scrolling */
    html {
        scroll-behavior: smooth;
    }

    /* Custom scrollbar for sidebar */
    aside::-webkit-scrollbar {
        width: 6px;
    }

    aside::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.05);
    }

    aside::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.2);
        border-radius: 3px;
    }

    aside::-webkit-scrollbar-thumb:hover {
        background: rgba(255,255,255,0.3);
    }
</style>

</head>
<body>
<!-- Mobile navbar line -->
<div class="mobile-navbar">
    <h1 class="navbar-title" onclick="loadHome()">TSJ Trading</h1>
</div>

<!-- Hamburger menu button for mobile -->
<button class="mobile-menu-toggle" onclick="toggleSidebar()" aria-label="Toggle Menu">
    <i class="bi bi-list"></i>
</button>

<!-- Overlay for mobile sidebar -->
<div class="sidebar-overlay" onclick="toggleSidebar()"></div>

<div class="container-fluid min-vh-100">
    <div class="row min-vh-100">

        <!-- BAL SIDEBAR -->
        <aside class="col-12 col-md-4 col-lg-3 bg-dark text-white p-4 d-flex flex-column" id="sidebar">
            <div class="mb-4">
                <strong style="cursor: pointer;" onclick="loadHome()">TSJ - Trading Course</strong>
            </div>

            <ul class="nav nav-pills flex-column gap-2">
                <li class="nav-item">
                    <button class="nav-link text-white main-menu-btn w-100 text-start" onclick="loadMain()">Vision board 2026</button>
                </li>

            <!-- basics -->
            <li class="nav-item">
            <button
                class="nav-link text-white text-start w-100 main-menu-btn"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#basicsMenu"
                aria-expanded="false"
                aria-controls="basicsMenu"
            >
                Basics
            </button>

            <div class="collapse" id="basicsMenu">
                <ul class="nav flex-column my-2 submenu-container">
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadBasics('candlesticks')">Candlesticks</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadBasics('support-resistance')">Support &amp; Resistance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadBasics('order-types')">Order types</a>
                </li>
                </ul>
            </div>
            </li>

            <!-- psychology -->
            <li class="nav-item">
            <button
                class="nav-link text-white text-start w-100 main-menu-btn"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#psychMenu"
                aria-expanded="false"
                aria-controls="psychMenu"
            >
                Psychology
            </button>

            <div class="collapse" id="psychMenu">
                <ul class="nav flex-column my-2 submenu-container">
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadPsychology('mindset')">Mindset</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadPsychology('risk')">Risk Management</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadPsychology('market-psychology')">Basic Understanding</a>
                </li>
                </ul>
            </div>
            </li>


            <!-- strategy -->
            <li class="nav-item">
            <button
                class="nav-link text-white text-start w-100 main-menu-btn"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#strategyMenu"
                aria-expanded="false"
                aria-controls="strategyMenu"
            >
                Strategy
            </button>

            <div class="collapse" id="strategyMenu">
                <ul class="nav flex-column my-2 submenu-container">
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadStrategy('price-action')">Intraday Liquidity Volatility Model</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadStrategy('breakout')">Breakout</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadStrategy('pullback')">Pullback</a>
                </li>
                </ul>
            </div>
            </li>


            <!-- propfirms -->
            <li class="nav-item">
            <button
                class="nav-link text-white text-start w-100 main-menu-btn"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#propMenu"
                aria-expanded="false"
                aria-controls="propMenu"
            >
                Propfirms
            </button>

            <div class="collapse" id="propMenu">
                <ul class="nav flex-column my-2 submenu-container">
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadPropfirms('overview')">Overview</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadPropfirms('rules')">Rules</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white submenu-item" onclick="loadPropfirms('tips')">Tips</a>
                </li>
                </ul>
            </div>
            </li>

            <!-- lexicon -->
            <li class="nav-item">
                <button class="nav-link text-white main-menu-btn w-100 text-start" onclick="loadLexicon()">Lexicon</button>
            </li>
            </ul>
        </aside>

        <!-- JOBB TARTALOM -->
        <main class="col-12 col-md-8 col-lg-9 text-white p-4 overflow-auto"> 
        </main>
    </div>
</div>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Alkalmazás logika -->
<script>
  // Toggle sidebar on mobile
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.querySelector('.sidebar-overlay');
    sidebar.classList.toggle('show');
    overlay.classList.toggle('show');
  }

  // Close sidebar when clicking on menu items (mobile only)
  function closeSidebarOnMobile() {
    if (window.innerWidth < 768) {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.querySelector('.sidebar-overlay');
      sidebar.classList.remove('show');
      overlay.classList.remove('show');
    }
  }

  // Scroll to top
  function scrollToTop() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  }

  // Setup mobile flip cards
  function setupMobileFlipCards() {
    const flipCards = document.querySelectorAll('.flip-card');
    flipCards.forEach(card => {
      card.addEventListener('click', function() {
        if (window.innerWidth < 768) {
          // Remove flipped class from all cards
          flipCards.forEach(c => c.classList.remove('flipped'));
          // Add flipped class to clicked card
          this.classList.add('flipped');
        }
      });
    });
  }

  // Kezdőoldal betöltése indításkor
  window.addEventListener('DOMContentLoaded', function() {
    loadHome();
  });

  function loadHome() {
    closeSidebarOnMobile();
    scrollToTop();
    const mainContent = document.querySelector('main');
    mainContent.innerHTML = `
      <div class="container py-5">
        <h1 class="mb-4 text-center">Welcome to TSJ Course!</h1>
        <div class="row justify-content-center mb-5">
          <div class="col-lg-8">
            <div class="ratio ratio-16x9 mb-4">
              <iframe 
                src="https://www.youtube.com/embed/FVo4W-thoX0" 
                title="Introduction Video" 
                allowfullscreen
                style="border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">
              </iframe>
            </div>
            <p class="text-center text-muted small">By clicking the video, you get a brief introduction to the purpose of the site.</p>
          </div>
        </div>

        <div class="row justify-content-center">
          <div class="col-lg-6">
            <h3 class="text-center mb-4">Follow on Social Media</h3>
            <div class="d-flex justify-content-center gap-4 flex-wrap">
              <a href="https://www.instagram.com/stenzeljurgen/" target="_blank" class="btn btn-outline-light btn-lg" style="min-width: 120px;">
                <i class="bi bi-instagram"></i> Instagram
              </a>
              <a href="https://youtube.com/@jurgenstenzel3857" target="_blank" class="btn btn-outline-light btn-lg" style="min-width: 120px;">
                <i class="bi bi-youtube"></i> YouTube
              </a>
              <a href="https://twitter.com/stenzeljurgen" target="_blank" class="btn btn-outline-light btn-lg" style="min-width: 120px;">
                <i class="bi bi-twitter"></i> Twitter
              </a>
              <a href="https://discord.gg/tHpB9XhT" target="_blank" class="btn btn-outline-light btn-lg" style="min-width: 120px;">
                <i class="bi bi-discord"></i> Discord
              </a>
            </div>
            <p class="text-center text-muted small mt-3">...</p>
          </div>
        </div>
      </div>
    `;
  }

  function loadMain() {
    closeSidebarOnMobile();
    scrollToTop();
    const mainContent = document.querySelector('main');
    mainContent.innerHTML = `
      <h1 class="mb-4">Vision Board 2026</h1>
      <p class="mb-5"></p>
      
      <div class="row">
        <!-- 1. kártya -->
        <div class="col-12 col-md-6 col-lg-4">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <h3>Üzleti célkitűzés</h3>
                <p>Elsődleges célom, hogy hosszú távon a tőzsdei kereskedésből biztosítsam a megélhetésemet, és képes legyek eltartani magamat, valamint a páromat. Olyan stabil és fenntartható jövedelemforrást szeretnék kialakítani, amely függetlenséget és kiszámíthatóságot biztosít.</p>
              </div>
              <div class="flip-card-back">
                <img src="https://moneymatters.jagattimes.com/wp-content/uploads/2025/08/What-is-Financial-Management.jpg.optimal.jpg" alt="Business Goals">
                <p>Stabil jövedelem, függetlenség és kiszámíthatóság</p>
              </div>
            </div>
          </div>
        </div>

        <!-- 2. kártya -->
        <div class="col-12 col-md-6 col-lg-4">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <h3>Szakmai fejlődési célok</h3>
                <p>Célom, hogy a kereskedésben olyan szintre jussak el, ahol magabiztosan, következetesen és rendszeresen tudok profitábilisan kereskedni. Ennek alapja egy jól definiált kereskedési rendszer, megfelelő kockázatkezelés és folyamatos önfejlesztés.</p>
              </div>
              <div class="flip-card-back">
                <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400" alt="Professional Development">
                <p>Magabiztos, következetes és profitábilis kereskedés</p>
              </div>
            </div>
          </div>
        </div>

        <!-- 3. kártya -->
        <div class="col-12 col-md-6 col-lg-4">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <h3>Tőkestratégia és finanszírozás</h3>
                <p>A terv megvalósításához legalább három prop trading cégnél szeretnék finanszírozott számlát elérni, számlánként minimum 100 000 USD értékben (pl. FTMO: 200 000 USD, FundingPips: 100 000 USD). Alternatív lehetőségként a futures piac is szóba jöhet.</p>
              </div>
              <div class="flip-card-back">
                <img src="https://media.propfirmmatch.group/user_2tvbdPkCE5ptKuKucfdNszqlnPY/yeib1vccyc75jq7d11tn5flx/Prop_Firm_Match_-_Best_Funding_Prop_Firms.png" alt="Long Term Vision" alt="Capital Strategy">
                <p>Prop trading cégek és futures piac</p>
              </div>
            </div>
          </div>
        </div>

        <!-- 4. kártya -->
        <div class="col-12 col-md-6 col-lg-4">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <h3>Pénzügyi és életviteli célok</h3>
                <p>A tőzsdei bevételekből szeretném finanszírozni: egy kisebb, igényes lakás fenntartását valamint az évben legalább három közös utazást.</p>
              </div>
              <div class="flip-card-back">
                <img src="https://forgozoltanugyved.hu/wp-content/uploads/sites/51/2020/05/uj-lakas-vasarlasok-jogi-buktatoi.jpg" alt="Lifestyle Goals">
                <p>Lakás, autó és utazások a kereskedésből</p>
              </div>
            </div>
          </div>
        </div>

        <!-- 5. kártya -->
        <div class="col-12 col-md-6 col-lg-4">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <h3>Hosszú távú vízió</h3>
                <p>Hosszú távon célom egy stabil, skálázható kereskedési tevékenység kiépítése, amely lehetővé teszi az anyagi biztonságot, az életminőség folyamatos javítását, valamint a pénzügyi függetlenség elérését.</p>
              </div>
              <div class="flip-card-back">
                <img src="https://images.ctfassets.net/icup9dtik4s2/7flPJS0pNkYY58hfTvtE6g/a78b1c9ae97f7d3673f979ff6636caa4/Financial-freedom.jpg" alt="Long Term Vision">
                <p>Stabil, skálázható kereskedés és pénzügyi függetlenség</p>
              </div>
            </div>
          </div>
        </div>

        <!-- 6. kártya -->
        <div class="col-12 col-md-6 col-lg-4">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <h3>Gépjármű</h3>
                <p>Rövid távon egy megbízható, használt személygépkocsi beszerzése a cél. Mint például egy 2011–2013-as évjáratú Opel Insignia.</p>
              </div>
              <div class="flip-card-back">
                <img src="https://www.auto-data.net/images/f52/Opel-Insignia-Sports-Tourer-A.jpg" alt="Vehicle">
                <p>Helytől való függetlenség és némi prezentációs érték</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    `;
    setTimeout(setupMobileFlipCards, 100);
  }

  function loadBasics(section = '') {
    closeSidebarOnMobile();
    scrollToTop();
    const mainContent = document.querySelector('main');
    const title = 'Basics';
    
    if (section === 'candlesticks') {
      loadCandlesticks();
    } else if (section === 'support-resistance') {
      loadSupportResistance();
    } else if (section === 'order-types') {
      loadOrderTypes();
    } else {
      const contentMap = {
      };
      mainContent.innerHTML = contentMap[section] || `<h2>${title}</h2><p>Válassz egy témát a lenyílóból.</p>`;
    }
  }

  // Load Support & Resistance from JSON
  async function loadSupportResistance() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('supportandresistance.en.json');
      const data = await response.json();
      
      let html = `
        <h1 class="mb-4">${data.guide_overview.title}</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
          <div class="card-body">
            <p>${data.guide_overview.introduction}</p>
            <h5 class="mt-3 mb-2">Topics covered:</h5>
            <ul>
      `;
      
      data.guide_overview.topics.forEach(topic => {
        html += `<li>${topic}</li>`;
      });
      
      html += `
            </ul>
          </div>
        </div>
        
        <h2 class="mb-4 mt-5">Identification Methods</h2>
      `;
      
      data.identification_methods.forEach(method => {
        html += `
          <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
            <div class="card-body">
              <h5 class="card-title" style="color: #6ba3d4; font-weight: 600;">${method.method}</h5>
              <p class="card-text">${method.description}</p>
        `;
        
        if (method.image_url) {
          html += `
            <div style="margin: 1.5rem 0; max-width: 100%;">
              <img src="${method.image_url}" alt="${method.method}" class="sr-content-image" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
            </div>
          `;
        }
        
        if (method.application_areas) {
          html += `<h6 style="color: #d4e3f7; margin-top: 1rem;">Application Areas:</h6><ul>`;
          method.application_areas.forEach(area => {
            html += `<li style="color: #d4e3f7; font-size: 0.9rem;">${area}</li>`;
          });
          html += `</ul>`;
        }
        
        if (method.drawing_methods) {
          html += `<h6 style="color: #d4e3f7; margin-top: 1rem;">Drawing Methods:</h6><ul>`;
          method.drawing_methods.forEach(dm => {
            html += `<li style="color: #d4e3f7; font-size: 0.9rem;">${dm}</li>`;
          });
          html += `</ul>`;
        }
        
        if (method.key_principles) {
          html += `<h6 style="color: #d4e3f7; margin-top: 1rem;">Key Principles:</h6><ul>`;
          method.key_principles.forEach(kp => {
            html += `<li style="color: #d4e3f7; font-size: 0.9rem;">${kp}</li>`;
          });
          html += `</ul>`;
        }
        
        if (method.key_levels) {
          html += `<h6 style="color: #d4e3f7; margin-top: 1rem;">Key Levels:</h6><ul>`;
          method.key_levels.forEach(level => {
            html += `<li style="color: #d4e3f7; font-size: 0.9rem;">${level}</li>`;
          });
          html += `</ul>`;
        }
        
        if (method.application) {
          html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-top: 1rem;"><strong>Application:</strong> ${method.application}</p>`;
        }
        
        if (method.purpose) {
          html += `<p style="color: #d4e3f7; font-size: 0.9rem;"><strong>Purpose:</strong> ${method.purpose}</p>`;
        }
        
        html += `</div></div>`;
      });
      
      html += `
        <h2 class="mb-4 mt-5">Correct Application</h2>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #6ba3d4; font-weight: 600;">${data.correct_application.title}</h5>
            <p class="card-text" style="color: #d4e3f7;"><strong>Core Principle:</strong> ${data.correct_application.core_principle}</p>
            <hr style="border-color: #3d5a80;">
            <p class="card-text" style="color: #d4e3f7;"><strong>Significance Rule:</strong> ${data.correct_application.significance_rule}</p>
            <p class="card-text" style="color: #d4e3f7;"><strong>Holding Definition:</strong> ${data.correct_application.definition_of_holding}</p>
            <p class="card-text" style="color: #d4e3f7;"><strong>Break Definition:</strong> ${data.correct_application.definition_of_break}</p>
            <p class="card-text" style="color: #d4e3f7;"><strong>Recognition Signals:</strong> ${data.correct_application.recognition_signals}</p>
            <p class="card-text" style="color: #d4e3f7;"><strong>Polarity Principle:</strong> ${data.correct_application.polarity_principle}</p>
          </div>
        </div>
        
        <h2 class="mb-4 mt-5">Key Takeaways</h2>
        <div class="card" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
          <div class="card-body">
            <ul>
      `;
      
      data.summary.key_takeaways.forEach(takeaway => {
        html += `<li style="color: #d4e3f7; margin-bottom: 0.5rem;">${takeaway}</li>`;
      });
      
      html += `
            </ul>
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading Support & Resistance. Please check if supportandresistance.en.json exists.</p>';
      console.error('Error loading support & resistance:', error);
    }
  }

  // Load Order Types from JSON
  async function loadOrderTypes() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('ordertype.en.json');
      const data = await response.json();
      
      let html = `
        <h1 class="mb-4">${data.guide_overview.title}</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
          <div class="card-body">
            <p>${data.guide_overview.introduction}</p>
            <h5 class="mt-3 mb-2">Primary Order Types:</h5>
            <ul>
      `;
      
      data.guide_overview.primary_order_types.forEach(type => {
        html += `<li>${type}</li>`;
      });
      
      html += `
            </ul>
          </div>
        </div>
        
        <h2 class="mb-4 mt-5">Basic Order Types</h2>
      `;
      
      data.basic_order_types.forEach(order => {
        html += `
          <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
            <div class="card-body">
              <h5 class="card-title" style="color: #6ba3d4; font-weight: 600;">${order.type}</h5>
              <p class="card-text" style="color: #d4e3f7;"><strong>Definition:</strong> ${order.definition}</p>
              
              <h6 style="color: #d4e3f7; margin-top: 1rem;">Key Characteristics:</h6>
              <ul>
        `;
        
        order.key_characteristics.forEach(char => {
          html += `<li style="color: #d4e3f7; font-size: 0.9rem;">${char}</li>`;
        });
        
        html += `
              </ul>
              <p class="card-text" style="color: #d4e3f7; margin-top: 1rem;"><strong>Use Case:</strong> ${order.use_case}</p>
            </div>
          </div>
        `;
      });
      
      html += `<h2 class="mb-4 mt-5">Advanced Order Types</h2>`;
      
      data.advanced_order_types.forEach(advOrder => {
        html += `
          <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
            <div class="card-body">
              <h5 class="card-title" style="color: #6ba3d4; font-weight: 600;">${advOrder.type}</h5>
              <p class="card-text" style="color: #d4e3f7;"><strong>Definition:</strong> ${advOrder.definition}</p>
        `;
        
        if (advOrder.variations) {
          html += `<h6 style="color: #d4e3f7; margin-top: 1rem;">Variations:</h6>`;
          advOrder.variations.forEach(variation => {
            html += `
              <div style="background: rgba(0,0,0,0.2); padding: 0.75rem; border-radius: 5px; margin-bottom: 1rem;">
                <p style="color: #6ba3d4; font-weight: 600; margin: 0;">${variation.name}</p>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0.5rem 0 0 0;"><strong>Scenario:</strong> ${variation.scenario}</p>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0.25rem 0;"><strong>Execution:</strong> ${variation.execution}</p>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0.25rem 0;"><strong>Purpose:</strong> ${variation.purpose}</p>
              </div>
            `;
          });
        }
        
        if (advOrder.example) {
          html += `
            <h6 style="color: #d4e3f7; margin-top: 1rem;">Example</h6>
            <p style="color: #d4e3f7; font-size: 0.9rem;"><strong>Scenario:</strong> ${advOrder.example.scenario}</p>
            <ul>
          `;
          advOrder.example.execution_flow.forEach(step => {
            html += `<li style="color: #d4e3f7; font-size: 0.9rem;">${step}</li>`;
          });
          html += `</ul>`;
        }
        
        if (advOrder.key_characteristics) {
          html += `
            <h6 style="color: #d4e3f7; margin-top: 1rem;">Key Characteristics:</h6>
            <ul>
          `;
          advOrder.key_characteristics.forEach(char => {
            html += `<li style="color: #d4e3f7; font-size: 0.9rem;">${char}</li>`;
          });
          html += `</ul>`;
        }
        
        if (advOrder.important_note) {
          html += `<p style="color: #ff6b6b; font-style: italic; margin-top: 1rem;"><strong>Important:</strong> ${advOrder.important_note}</p>`;
        }
        
        html += `</div></div>`;
      });
      
      html += `
        <h2 class="mb-4 mt-5">Comparison Summary</h2>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
          <div class="card-body">
            <h6 style="color: #d4e3f7;">Execution Guarantee:</h6>
            <ul style="color: #d4e3f7; font-size: 0.9rem;">
              <li><strong>Highest:</strong> ${data.comparison_summary.execution_guarantee.highest}</li>
              <li><strong>Conditional:</strong> ${data.comparison_summary.execution_guarantee.conditional}</li>
              <li><strong>Price Based:</strong> ${data.comparison_summary.execution_guarantee.price_based}</li>
            </ul>
            
            <h6 style="color: #d4e3f7; margin-top: 1rem;">Speed of Execution:</h6>
            <ul style="color: #d4e3f7; font-size: 0.9rem;">
              <li><strong>Fastest:</strong> ${data.comparison_summary.speed_of_execution.fastest}</li>
              <li><strong>Triggered:</strong> ${data.comparison_summary.speed_of_execution.triggered}</li>
              <li><strong>Price Controlled:</strong> ${data.comparison_summary.speed_of_execution.price_controlled}</li>
            </ul>
            
            <h6 style="color: #d4e3f7; margin-top: 1rem;">Primary Use Cases:</h6>
            <ul style="color: #d4e3f7; font-size: 0.9rem;">
              <li><strong>Immediate Execution:</strong> ${data.comparison_summary.primary_use_cases.immediate_execution}</li>
              <li><strong>Price Control:</strong> ${data.comparison_summary.primary_use_cases.price_control}</li>
              <li><strong>Risk Management:</strong> ${data.comparison_summary.primary_use_cases.risk_management}</li>
              <li><strong>Trend Following:</strong> ${data.comparison_summary.primary_use_cases.trend_following}</li>
              <li><strong>Precision Entry/Exit:</strong> ${data.comparison_summary.primary_use_cases.precision_entry_exit}</li>
            </ul>
          </div>
        </div>
        
        <h2 class="mb-4 mt-5">Practical Application</h2>
        <div class="card" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
          <div class="card-body">
            <p style="color: #d4e3f7;"><strong>Risk Management Note:</strong> ${data.practical_application.risk_management_note}</p>
            <p style="color: #d4e3f7;"><strong>Liquidity Consideration:</strong> ${data.practical_application.liquidity_consideration}</p>
            <p style="color: #d4e3f7;"><strong>Strategy Integration:</strong> ${data.practical_application.strategy_integration}</p>
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading Order Types. Please check if ordertype.en.json exists.</p>';
      console.error('Error loading order types:', error);
    }
  }

  // Load candlesticks from JSON
  async function loadCandlesticks() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('candlesticks.en.json');
      const data = await response.json();
      
      let html = `
        <h1 class="mb-4">Candlestick Patterns</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; color: white;">
          <div class="card-body">
            <h5 class="card-title">Color Guide</h5>
            <div class="row mt-3">
      `;
      
      // Add color guide
      Object.entries(data.general.colors).forEach(([color, meaning]) => {
        html += `
              <div class="col-md-4 mb-2">
                <strong>${color.charAt(0).toUpperCase() + color.slice(1)}:</strong> ${meaning}
              </div>
        `;
      });
      
      html += `
            </div>
            <p class="mt-3 mb-0"><em>${data.general.scope}</em></p>
          </div>
        </div>
        
        <div class="row">
      `;
      
      // Add each pattern
      const candleImages = {
        'Doji': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375866522903248956/1.png?ex=694cb74d&is=694b65cd&hm=57a5ff50d60da0bb9a77732c492e5a1ebbf44d2ddbfbdec30decd050c14d1462&',
        'Hammer': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375866614783676416/2.png?ex=694cb763&is=694b65e3&hm=3feeceace56762046691e3147793d9a87dcbf26369f970760d3426d8b0fc1742&-1518622506881-b82c88f5e000?w=400&h=300&fit=crop',
        'Shooting Star': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375866703715635241/3.png?ex=694cb778&is=694b65f8&hm=cd0f0848678ef7f312c264e3e822f54e5800aedb490479fed6c6b3744c816d58&',
        'Bullish Engulfing': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375866735152070766/4.png?ex=694cb780&is=694b6600&hm=66cb4ef5f9a56822ba53738e093a4697b87161f60617ad1eae449806be5b4bf4&',
        'Bearish Engulfing': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375866816038965400/5.png?ex=694cb793&is=694b6613&hm=54d094cb5ca59fc2d67eea4a6b294f84212ef386b866b5917efb137df243fdd6&',
        'Piercing Pattern': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375866965180026880/6.png?ex=694cb7b6&is=694b6636&hm=74dd38e97e23699d9ac694ec031ae2b6222ac2648c4a102b2f6e0704d2c94c02&',
        'Dark Cloud Cover': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375867061779173426/7.png?ex=694cb7cd&is=694b664d&hm=b11401b8f840d4b45fbcae8cd888d8aa76d451255cc45d6ff35660489ebe11c5&',
        'Morning Star': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375867183900393632/8.png?ex=694cb7eb&is=694b666b&hm=a86b0c6eca46e3025eb5f8083ff761f43cccb2c5252c82e24a3913d01137c4bf&',
        'Evening Star': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375867305417769020/9.png?ex=694cb807&is=694b6687&hm=046902b18695320d8112938e1f2f5144c57387baed09fbd92a9c2e9bd6aefce6&',
        'Rising Three Methods': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375867367719964692/10.png?ex=694cb816&is=694b6696&hm=c3e5a2f4412f61fadf0e766f8dffc1311a448a65e905d70a89d6187547f5d148&',
        'Falling Three Methods': 'https://cdn.discordapp.com/attachments/1375862464754749651/1375867511215751320/11.png?ex=694cb839&is=694b66b9&hm=877c37931c780d59e99ff5cc6780739a754dbdde6c33ed27825e9ecd56ebbdcf&'
      };
      
      Object.entries(data.patterns).forEach(([patternName, patternData]) => {
        const imageUrl = candleImages[patternName] || 'https://images.unsplash.com/photo-1516321318423-f06f70504504?w=400&h=300&fit=crop';
        html += `
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
              <div class="card-body">
                <h5 class="card-title" style="color: #fff; font-weight: 600;">${patternName}</h5>
                <p class="card-text" style="font-size: 0.9rem; color: #d4e3f7; margin-bottom: 1rem;">${patternData.description}</p>
        `;
        
        // Add types if they exist
        if (patternData.types && Object.keys(patternData.types).length > 0) {
          html += `<div style="border-top: 1px solid #3d5a80; padding-top: 0.75rem;">`;
          Object.entries(patternData.types).forEach(([typeName, typeDesc]) => {
            html += `
              <div class="mb-2">
                <small><strong style="color: #6ba3d4;">${typeName}:</strong></small>
                <small style="color: #d4e3f7;">${typeDesc}</small>
              </div>
            `;
          });
          html += `</div>`;
        }
        
        html += `
<div class="mt-3" style="text-align: center; padding: 1rem;">
                  <img src="${imageUrl}" alt="${patternName}" style="max-width: 100%; height: auto; border-radius: 5px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
                </div>
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading candlesticks. Please check if candlesticks.en.json exists.</p>';
      console.error('Error loading candlesticks:', error);
    }
  }

  function loadPsychology(section = '') {
    closeSidebarOnMobile();
    scrollToTop();
    const mainContent = document.querySelector('main');
    const title = 'Psychology';
    
    if (section === 'risk') {
      loadRiskManagement();
    } else if (section === 'mindset') {
      loadMindset();
    } else if (section === 'market-psychology') {
      loadMarketPsychology();
    } else {
      mainContent.innerHTML = `<h2>${title}</h2><p>Válassz egy témát a lenyílóból.</p>`;
    }
  }

  // Load market psychology from JSON
  async function loadMarketPsychology() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('marketpsychology.en.json');
      const data = await response.json();
      
      let html = `
        <h1 class="mb-4">Market Psychology - Basic Understanding</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #5a3d2d 0%, #3d2a1e 100%); border: 2px solid #9f7a4a; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #ffc9a8; font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem;">${data.market_metaphor.title}</h5>
            <p style="font-size: 1rem; color: #d4e3f7; line-height: 1.8; font-style: italic; margin: 0;">${data.market_metaphor.content}</p>
          </div>
        </div>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #5a2d2d 0%, #3d1a1a 100%); border: 2px solid #9f4a4a; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #ff9999; font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem;">${data.statistical_reality.title}</h5>
            <p style="font-size: 0.95rem; color: #d4e3f7; line-height: 1.8; margin: 0;">${data.statistical_reality.content}</p>
          </div>
        </div>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #3d2d5a 0%, #2a1a3d 100%); border: 2px solid #7a4a9f;">
          <div class="card-body">
            <h5 style="color: #d4a8ff; font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem;">${data.psychological_foundation.title}</h5>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${data.psychological_foundation.content}</p>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; border-left: 4px solid #d4a8ff; margin-bottom: 1rem;">
              <p style="color: #d4e3f7; font-size: 0.9rem; line-height: 1.6; margin: 0;"><strong style="color: #d4a8ff;">Market Reality:</strong> ${data.psychological_foundation.market_reality}</p>
            </div>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; border-left: 4px solid #ff9999;">
              <p style="color: #d4e3f7; font-size: 0.9rem; line-height: 1.6; margin: 0;"><strong style="color: #ff9999;">Zero-Sum Game:</strong> ${data.psychological_foundation.zero_sum_nature}</p>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Common Psychological Mistakes</h3>
        
        <div class="row">
      `;
      
      // Add each psychological mistake
      data.common_psychological_mistakes.forEach((item, index) => {
        html += `
          <div class="col-12 mb-4">
            <div class="card" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
              <div class="card-body">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
                  <div style="width: 45px; height: 45px; background: #9f4a4a; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.3rem;">
                    ${index + 1}
                  </div>
                  <h5 style="color: #ff9999; margin: 0; font-weight: 700;">${item.mistake}</h5>
                </div>
                
                <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 0.75rem;"><strong style="color: #a8c5ff;">Description:</strong> ${item.description}</p>
                <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 0;"><strong style="color: #ffc9a8;">Impact:</strong> ${item.details}</p>
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
          <div class="card-body">
            <h4 style="color: #a8d5a8; font-weight: 700; margin-bottom: 1rem;">${data.analysis_and_solution.title}</h4>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${data.analysis_and_solution.cause}</p>
            
            <h6 style="color: #a8d5a8; font-weight: 600; margin-bottom: 0.75rem;">Solution Overview:</h6>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${data.analysis_and_solution.solution.overview}</p>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px;">
              <h6 style="color: #a8d5a8; font-weight: 600; margin-bottom: 0.75rem;">Methods to Apply:</h6>
              <ul style="margin: 0; padding-left: 1.5rem;">
      `;
      
      data.analysis_and_solution.solution.methods.forEach(method => {
        html += `<li style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">${method}</li>`;
      });
      
      html += `
              </ul>
            </div>
          </div>
        </div>
        
        <div class="card" style="background: linear-gradient(135deg, #5a3d2d 0%, #3d2a1e 100%); border: 2px solid #9f7a4a;">
          <div class="card-body">
            <h4 style="color: #ffc9a8; font-weight: 700; margin-bottom: 1rem;">⭐ ${data.core_principle.title}</h4>
            <p style="color: #d4e3f7; font-size: 1rem; line-height: 1.8; margin: 0; border-left: 4px solid #ffc9a8; padding-left: 1rem;"><strong style="color: #ffc9a8;">${data.core_principle.content}</strong></p>
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading market psychology. Please check if marketpsychology.en.json exists.</p>';
      console.error('Error loading market psychology:', error);
    }
  }

  // Load mindset from JSON
  async function loadMindset() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('mindset.en.json');
      const data = await response.json();
      
      let html = `
        <h1 class="mb-4">${data.mindset_overview.title}</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #3d2d5a 0%, #2a1a3d 100%); border: 2px solid #7a4a9f; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #d4a8ff; font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Introduction</h5>
            <h6 style="color: #b8a8d4;">${data.introduction.title}</h6>
            <p style="font-size: 0.9rem; color: #d4e3f7; line-height: 1.6; margin-top: 0.5rem;">${data.introduction.content}</p>
          </div>
        </div>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <h5 style="color: #a8c5ff; font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">${data.mindset_overview.content}</h5>
            <div style="text-align: center; margin-top: 1rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 5px;">
              <h6 style="color: #6ba3d4; font-size: 1.3rem; font-weight: 700; margin: 0;">${data.mindset_overview.breakdown}</h6>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">The Three Key Pillars</h3>
        
        <div class="row">
      `;
      
      // Add each pillar
      data.key_pillars.forEach((pillar, index) => {
        const colors = [
          { bg: '#3d2d5a', border: '#7a4a9f', accent: '#d4a8ff' },
          { bg: '#2d5a3d', border: '#4a9f6e', accent: '#a8d5a8' },
          { bg: '#5a3d2d', border: '#9f7a4a', accent: '#ffc9a8' }
        ];
        const color = colors[index % colors.length];
        
        html += `
          <div class="col-12 mb-4">
            <div class="card" style="background: linear-gradient(135deg, ${color.bg} 0%, rgba(0,0,0,0.2)); border: 2px solid ${color.border};">
              <div class="card-body">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
                  <div style="width: 50px; height: 50px; background: ${color.border}; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.5rem;">
                    ${index + 1}
                  </div>
                  <h4 style="color: ${color.accent}; margin: 0; font-weight: 700;">${pillar.pillar}</h4>
                </div>
                
                <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${pillar.description}</p>
        `;
        
        // Add subpoints/guidelines/principles
        if (pillar.subpoints) {
          html += `<div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">`;
          Object.entries(pillar.subpoints).forEach(([key, value]) => {
            const keyLabel = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            html += `
              <div class="mb-2">
                <strong style="color: ${color.accent};">${keyLabel}:</strong>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin-top: 0.3rem; margin-bottom: 0.5rem;">${value}</p>
              </div>
            `;
          });
          html += `</div>`;
        }
        
        if (pillar.guidelines) {
          html += `<div style="margin-bottom: 1rem;">`;
          pillar.guidelines.forEach((guideline, gIndex) => {
            html += `
              <div style="display: flex; gap: 10px; margin-bottom: 0.5rem;">
                <span style="color: ${color.accent}; font-weight: bold;">✓</span>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;">${guideline}</p>
              </div>
            `;
          });
          html += `</div>`;
        }
        
        if (pillar.principles) {
          html += `<div style="margin-bottom: 1rem;">`;
          pillar.principles.forEach((principle, pIndex) => {
            html += `
              <div style="display: flex; gap: 10px; margin-bottom: 0.5rem;">
                <span style="color: ${color.accent}; font-weight: bold;">•</span>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;">${principle}</p>
              </div>
            `;
          });
          html += `</div>`;
        }
        
        if (pillar.mantra) {
          html += `
            <div style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-left: 4px solid ${color.border}; border-radius: 5px;">
              <p style="color: ${color.accent}; font-size: 1.1rem; font-weight: 700; margin: 0; font-style: italic;">"${pillar.mantra}"</p>
            </div>
          `;
        }
        
        if (pillar.challenge) {
          html += `
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(255,255,255,0.05); border: 1px solid ${color.border}; border-radius: 5px;">
              <p style="color: #d4e3f7; font-size: 0.9rem; line-height: 1.6; margin: 0;"><strong style="color: ${color.accent};">Challenge:</strong> ${pillar.challenge}</p>
            </div>
          `;
        }
        
        html += `
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
        
        <div class="card mt-4" style="background: linear-gradient(135deg, #3d2d5a 0%, #2a1a3d 100%); border: 2px solid #7a4a9f;">
          <div class="card-body">
            <h4 style="color: #d4a8ff; font-weight: 700; margin-bottom: 1rem;">${data.conclusion.title}</h4>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${data.conclusion.content}</p>
            <div style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 5px; border-left: 4px solid #d4a8ff;">
              <p style="color: #d4a8ff; font-size: 1rem; font-weight: 600; line-height: 1.6; margin: 0;">${data.conclusion.final_message}</p>
            </div>
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading mindset. Please check if mindset.en.json exists.</p>';
      console.error('Error loading mindset:', error);
    }
  }

  // Load risk management from JSON
  async function loadRiskManagement() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('riskmanagement.en.json');
      const data = await response.json();
      
      let html = `
        <h1 class="mb-4">Risk Management</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a7c5a; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #a8d5a8; font-size: 1.3rem; font-weight: 700;">
              <i class="bi bi-lightning-fill"></i> ${data.risk_management_summary}
            </h5>
          </div>
        </div>
        
        <div class="row">
      `;
      
      // Add each tip
      data.trading_risk_management_tips.forEach((tip, index) => {
        html += `
          <div class="col-12 col-md-6 col-lg-6 mb-4">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
              <div class="card-body">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                  <div style="width: 40px; height: 40px; background: #4a7c5a; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.2rem;">
                    ${index + 1}
                  </div>
                  <h5 class="card-title mb-0" style="color: #fff; font-weight: 600;">${tip.title}</h5>
                </div>
                <p class="card-text" style="font-size: 0.9rem; color: #d4e3f7; line-height: 1.6;">${tip.description}</p>
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
        
        <div class="card mt-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 1px solid #4a7c5a; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #a8d5a8; font-weight: 600; margin-bottom: 1rem;">Key Takeaway</h5>
            <p style="font-size: 0.95rem; line-height: 1.6; color: #d4e3f7;">${data.conclusion}</p>
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading risk management. Please check if riskmanagement.en.json exists.</p>';
      console.error('Error loading risk management:', error);
    }
  }

  function loadStrategy(section = '') {
    closeSidebarOnMobile();
    scrollToTop();
    const mainContent = document.querySelector('main');
    const title = 'Strategy';
    
    if (section === 'price-action') {
      loadIntradayLiquidityVolatilityModel();
    } else if (section === 'breakout') {
      loadBreakoutStrategy();
    } else if (section === 'pullback') {
      loadPullbackStrategy();
    } else {
      const contentMap = {
        'breakout': '<h2>Breakout</h2><p>Kitörések azonosítása és kezelése…</p>',
        'pullback': '<h2>Pullback</h2><p>Visszahúzódások beszállói…</p>'
      };
      mainContent.innerHTML = contentMap[section] || `<h2>${title}</h2><p>Válassz egy témát a lenyílóból.</p>`;
    }
  }

  // Load Intraday Liquidity Volatility Model from JSON
  async function loadIntradayLiquidityVolatilityModel() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('IntradayLiquidityVolatilityModel.en.json');
      const data = await response.json();
      const overview = data.strategy_overview;
      const playbook = data.playbook_rules;
      const eval = data.strategy_evaluation;
      const examples = data.trade_examples;
      
      let html = `
        <h1 class="mb-4">${overview.name}</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d4a5a 0%, #1a2d3d 100%); border: 2px solid #4a7a9f; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #a8c5ff; font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem;">Strategy Overview</h5>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${overview.description}</p>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; border-left: 4px solid #a8c5ff; margin-bottom: 1rem;">
              <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong style="color: #a8c5ff;">Objective:</strong> ${overview.objective}</p>
            </div>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; border-left: 4px solid #a8d5a8;">
              <p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong style="color: #a8d5a8;">Trading Style:</strong> ${overview.built_for.trading_style.join(', ')}</p>
              <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong style="color: #a8d5a8;">Instruments:</strong> ${overview.built_for.instruments.join(', ')}</p>
            </div>
          </div>
        </div>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
          <div class="card-body">
            <h5 class="card-title" style="color: #a8d5a8; font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem;">Execution Flow</h5>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin: 0;">${overview.execution_flow}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Playbook Rules</h3>
        <p style="color: #d4e3f7; margin-bottom: 1.5rem;"><strong>${playbook.prerequisites}</strong></p>
        
        <div class="row">
      `;
      
      // Add each rule
      playbook.rules.forEach((rule, index) => {
        html += `
          <div class="col-12 mb-4">
            <div class="card" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
              <div class="card-body">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
                  <div style="width: 45px; height: 45px; background: #4a9f6e; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.3rem;">
                    ${index + 1}
                  </div>
                  <h5 style="color: #a8d5a8; margin: 0; font-weight: 700;">${rule.rule}</h5>
                </div>
                
                <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 0.75rem;">${rule.description}</p>
        `;
        
        if (rule.zones) {
          html += `<div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 5px; margin-bottom: 0.75rem;">`;
          rule.zones.forEach(zone => {
            html += `<p style="color: #a8d5a8; font-size: 0.9rem; margin: 0.25rem 0;">• ${zone}</p>`;
          });
          html += `</div>`;
        }
        
        if (rule.confirmations) {
          html += `<div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 5px; margin-bottom: 0.75rem;">`;
          rule.confirmations.forEach(conf => {
            html += `<p style="color: #a8d5a8; font-size: 0.9rem; margin: 0.25rem 0;">✓ ${conf}</p>`;
          });
          html += `</div>`;
        }
        
        if (rule.targets) {
          html += `<div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 5px;">`;
          Object.entries(rule.targets).forEach(([key, value]) => {
            const keyLabel = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            html += `<p style="color: #a8d5a8; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>${keyLabel}:</strong> ${value}</p>`;
          });
          html += `</div>`;
        }
        
        html += `
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Strategy Evaluation</h3>
        
        <div class="row mb-4">
          <div class="col-12 col-lg-6">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
              <div class="card-body">
                <h5 class="card-title" style="color: #a8d5a8; font-weight: 700; margin-bottom: 1rem;">✓ Advantages</h5>
      `;
      
      eval.pros.forEach(pro => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(168, 213, 168, 0.2);">• ${pro}</p>`;
      });
      
      html += `
              </div>
            </div>
          </div>
          
          <div class="col-12 col-lg-6">
            <div class="card h-100" style="background: linear-gradient(135deg, #5a2d2d 0%, #3d1a1a 100%); border: 2px solid #9f4a4a;">
              <div class="card-body">
                <h5 class="card-title" style="color: #ff9999; font-weight: 700; margin-bottom: 1rem;">⚠ Things to Be Aware Of</h5>
      `;
      
      eval.cons.forEach(con => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(159, 74, 74, 0.2);">• ${con}</p>`;
      });
      
      html += `
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-bottom: 1.5rem;">Trade Examples</h3>
      `;
      
      // Add trade examples
      examples.forEach((example, exIdx) => {
        html += `
          <div class="card mb-4" style="background: linear-gradient(135deg, #3d2d5a 0%, #2a1a3d 100%); border: 2px solid #7a4a9f;">
            <div class="card-body">
              <h4 style="color: #d4a8ff; font-weight: 700; margin-bottom: 0.5rem;">${example.name}</h4>
              <p style="color: #a8c5ff; font-size: 0.9rem; margin-bottom: 1rem;"><em>${example.scenario}</em></p>
              
              <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px;">
        `;
        
        example.breakdown.forEach((step, stepIdx) => {
          html += `
            <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(212, 168, 255, 0.2);">
              <h6 style="color: #d4a8ff; font-weight: 700; margin-bottom: 0.5rem;">Step ${stepIdx + 1}: ${step.step}</h6>
              <p style="color: #d4e3f7; font-size: 0.9rem; line-height: 1.5; margin: 0; margin-bottom: 0.5rem;">${step.description}</p>
          `;
          
          if (step.opportunities) {
            step.opportunities.forEach(opp => {
              html += `
                <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-top: 0.5rem; border-radius: 4px; border-left: 3px solid #d4a8ff;">
                  <p style="color: #a8c5ff; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.3rem;">${opp.entry}</p>
                  <p style="color: #d4e3f7; font-size: 0.85rem; margin: 0;">${opp.description}</p>
                </div>
              `;
            });
          }
          
          if (step.execution) {
            html += `
              <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-top: 0.5rem; border-radius: 4px; border-left: 3px solid #a8d5a8;">
                <p style="color: #a8d5a8; font-size: 0.85rem; margin-bottom: 0.3rem;"><strong>Entry:</strong> ${step.execution.entry}</p>
                <p style="color: #a8d5a8; font-size: 0.85rem; margin-bottom: 0.3rem;"><strong>Stop:</strong> ${step.execution.stop}</p>
                <p style="color: #a8d5a8; font-size: 0.85rem; margin: 0;"><strong>Target:</strong> ${step.execution.target}</p>
              </div>
            `;
          }
          
          html += `</div>`;
        });
        
        html += `
              </div>
            </div>
          </div>
        `;
      });
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading Intraday Liquidity Volatility Model. Please check if IntradayLiquidityVolatilityModel.en.json exists.</p>';
      console.error('Error loading model:', error);
    }
  }

  // Load Breakout Strategy from JSON
  async function loadBreakoutStrategy() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('bostrategy.en.json');
      const data = await response.json();
      const overview = data.strategy_overview;
      const marketSession = data.market_session;
      const timeframeSetup = data.timeframe_setup;
      const orDef = data.opening_range_definition;
      const bias = data.trade_bias_filter;
      const entryRules = data.entry_rules;
      const stopLoss = data.stop_loss_rules;
      const tp = data.take_profit_targets;
      const tradeManagement = data.trade_management;
      const riskManagement = data.risk_management;
      const noTrade = data.no_trade_conditions;
      const example = data.example_trade;
      const rationale = data.strategy_rationale;
      const enhancements = data.optional_enhancements;
      
      let html = `
        <h1 class="mb-4">${overview.name}</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d4a5a 0%, #1a2d3d 100%); border: 2px solid #4a7a9f; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #a8c5ff; font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem;">Strategy Overview</h5>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${overview.description}</p>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; border-left: 4px solid #a8c5ff; margin-bottom: 1rem;">
              <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong style="color: #a8c5ff;">Version:</strong> ${overview.version}</p>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Market Session</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Instrument:</strong> ${marketSession.instrument}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Session:</strong> ${marketSession.session}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Trading Window:</strong> ${marketSession.trading_window}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Best Days:</strong> ${marketSession.best_days.join(', ')}</p>
            <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Timezone:</strong> ${marketSession.timezone}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Timeframe Setup</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Execution Timeframe:</strong> ${timeframeSetup.execution_timeframe.join(', ')}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Context Timeframe:</strong> ${timeframeSetup.context_timeframe}</p>
            <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Higher Timeframe Bias:</strong> ${timeframeSetup.higher_timeframe_bias.join(', ')}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Opening Range Definition</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
          <div class="card-body">
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8d5a8;">Name:</strong> ${orDef.name}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8d5a8;">Duration:</strong> ${orDef.start_time} - ${orDef.end_time} (${orDef.duration_minutes} minutes)</p>
            <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8d5a8;">Levels to Mark:</strong> ${orDef.levels_to_mark.join(', ')}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Trade Bias Filter</h3>
        <p style="color: #d4e3f7; margin-bottom: 1rem;"><strong style="color: #a8c5ff;">${bias.title}</strong> - ${bias.rule}</p>
        <div class="row mb-4">
      `;
      
      bias.bias_options.forEach((option) => {
        const biasColor = option.bias === 'bullish' ? '#a8d5a8' : option.bias === 'bearish' ? '#d5a8a8' : '#a8c5ff';
        html += `
          <div class="col-12 col-md-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-left: 4px solid ${biasColor};">
              <div class="card-body">
                <h5 style="color: ${biasColor}; font-weight: 700; margin-bottom: 0.5rem;">${option.name}</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;">${option.condition}</p>
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Entry Rules</h3>
        <div class="row mb-4">
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 1rem;">LONG Setup</h5>
      `;
      
      entryRules.long_setup.conditions.forEach((cond) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${cond}</p>`;
      });
      
      html += `
                <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-top: 1rem; border-radius: 4px; border-top: 2px solid #a8d5a8;">
                  <p style="color: #a8d5a8; font-size: 0.85rem; font-weight: 700; margin-bottom: 0.5rem;">Entry Options:</p>
      `;
      
      entryRules.long_setup.entry_options.forEach((opt) => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;"><strong>${opt.style}:</strong> ${opt.method}</p>`;
      });
      
      html += `
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #5a2d2d 0%, #3d1a1a 100%); border: 2px solid #9f4a4a;">
              <div class="card-body">
                <h5 style="color: #d5a8a8; font-weight: 700; margin-bottom: 1rem;">SHORT Setup</h5>
      `;
      
      entryRules.short_setup.conditions.forEach((cond) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${cond}</p>`;
      });
      
      html += `
                <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-top: 1rem; border-radius: 4px; border-top: 2px solid #d5a8a8;">
                  <p style="color: #d5a8a8; font-size: 0.85rem; font-weight: 700; margin-bottom: 0.5rem;">Entry Options:</p>
      `;
      
      entryRules.short_setup.entry_options.forEach((opt) => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;"><strong>${opt.style}:</strong> ${opt.method}</p>`;
      });
      
      html += `
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Stop Loss Rules</h3>
        <p style="color: #d4e3f7; margin-bottom: 1rem;"><strong style="color: #a8c5ff;">${stopLoss.important_rule}</strong></p>
        <div class="row mb-4">
      `;
      
      stopLoss.options.forEach((option) => {
        html += `
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
              <div class="card-body">
                <h5 style="color: #a8c5ff; font-weight: 700; margin-bottom: 0.5rem;">${option.type}</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">${option.description}</p>
                ${option.example ? `<p style="color: #a8d5a8; font-size: 0.85rem; margin: 0;"><em>${option.example}</em></p>` : ''}
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Take Profit Targets</h3>
        <div class="row mb-4">
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 0.5rem;">Conservative</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong>Risk/Reward:</strong> ${tp.conservative_target.risk_reward}</p>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d4a5a 0%, #1a2d3d 100%); border: 2px solid #4a7a9f;">
              <div class="card-body">
                <h5 style="color: #a8c5ff; font-weight: 700; margin-bottom: 0.5rem;">Standard (Recommended)</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong>Risk/Reward:</strong> ${tp.standard_target.risk_reward}</p>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #5a4a2d 0%, #3d2d1a 100%); border: 2px solid #9f7a4a;">
              <div class="card-body">
                <h5 style="color: #d5c5a8; font-weight: 700; margin-bottom: 0.5rem;">Runner Model</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.3rem;"><strong>TP1:</strong> ${tp.runner_model.tp1}</p>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong>TP2:</strong> ${tp.runner_model.tp2}</p>
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Trade Management</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
      `;
      
      tradeManagement.rules.forEach((rule) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">• ${rule}</p>`;
      });
      
      html += `
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Risk Management</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Risk per Trade:</strong> ${riskManagement.risk_per_trade}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Max Trades per Session:</strong> ${riskManagement.max_trades_per_session}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Daily Loss Limit:</strong> ${riskManagement.daily_loss_limit}</p>
            <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Contingency Rule:</strong> ${riskManagement.contingency_rule}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">No Trade Conditions</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #5a2d2d 0%, #3d1a1a 100%); border-left: 4px solid #d5a8a8;">
          <div class="card-body">
      `;
      
      noTrade.forEach((condition) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✗ ${condition}</p>`;
      });
      
      html += `
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Example Trade</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
              <p style="color: #a8c5ff; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Direction:</strong> ${example.direction}</p>
              <p style="color: #a8d5a8; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>OR High:</strong> ${example.levels.or_high}</p>
              <p style="color: #a8c5ff; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Entry:</strong> ${example.levels.entry}</p>
              <p style="color: #d5a8a8; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Stop Loss:</strong> ${example.levels.stop} (${example.levels.stop_points} points)</p>
              <p style="color: #a8d5a8; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>TP1:</strong> ${example.levels.tp1}</p>
              <p style="color: #a8d5a8; font-size: 0.9rem; margin: 0;"><strong>TP2:</strong> ${example.levels.tp2}</p>
            </div>
            <p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Break Time:</strong> ${example.timing.break_time}</p>
            <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong style="color: #a8c5ff;">Risk per Point:</strong> ${example.risk_calculation.risk_per_point} | <strong>Total Risk:</strong> ${example.risk_calculation.total_risk}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Strategy Rationale</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
          <div class="card-body">
      `;
      
      rationale.why_this_works.forEach((reason) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${reason}</p>`;
      });
      
      html += `
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Optional Enhancements</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
      `;
      
      enhancements.forEach((enhancement) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">+ ${enhancement}</p>`;
      });
      
      html += `
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading Breakout Strategy. Please check if bostrategy.en.json exists.</p>';
      console.error('Error loading breakout strategy:', error);
    }
  }

  // Load Pullback Strategy from JSON
  async function loadPullbackStrategy() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('pullback.en.json');
      const data = await response.json();
      const overview = data.strategy_overview;
      const marketSession = data.market_session;
      const timeframeSetup = data.timeframe_setup;
      const marketConditions = data.market_conditions;
      const biasRules = data.bias_rules;
      const pullbackDef = data.pullback_definition;
      const entryRules = data.entry_rules;
      const stopLoss = data.stop_loss_rules;
      const tp = data.take_profit_targets;
      const tradeManagement = data.trade_management;
      const riskManagement = data.risk_management;
      const noTrade = data.no_trade_conditions;
      const example = data.example_trade;
      const rationale = data.strategy_rationale;
      const enhancements = data.optional_enhancements;
      const metrics = data.performance_metrics;
      
      let html = `
        <h1 class="mb-4">${overview.name}</h1>
        
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d4a5a 0%, #1a2d3d 100%); border: 2px solid #4a7a9f; color: white;">
          <div class="card-body">
            <h5 class="card-title" style="color: #a8c5ff; font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem;">Strategy Overview</h5>
            <p style="color: #d4e3f7; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">${overview.description}</p>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; border-left: 4px solid #a8c5ff; margin-bottom: 1rem;">
              <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong style="color: #a8c5ff;">Version:</strong> ${overview.version}</p>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Market Session</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Instrument:</strong> ${marketSession.instrument}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Session:</strong> ${marketSession.session}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Trading Window:</strong> ${marketSession.trading_window}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Best Days:</strong> ${marketSession.best_days.join(', ')}</p>
            <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Timezone:</strong> ${marketSession.timezone}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Timeframe Setup</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Execution Timeframe:</strong> ${timeframeSetup.execution_timeframe}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Structure Timeframe:</strong> ${timeframeSetup.structure_timeframe}</p>
            <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Bias Timeframe:</strong> ${Array.isArray(timeframeSetup.bias_timeframe) ? timeframeSetup.bias_timeframe.join(', ') : timeframeSetup.bias_timeframe}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Market Conditions (MANDATORY)</h3>
        <p style="color: #d4e3f7; margin-bottom: 1rem;"><strong style="color: #a8c5ff;">${marketConditions.title}</strong> - ${marketConditions.rule}</p>
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
          <div class="card-body">
      `;
      
      marketConditions.conditions.forEach((cond) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${cond}</p>`;
      });
      
      html += `
            <p style="color: #d5a8a8; font-size: 0.9rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(213,168,168,0.2);"><strong>⚠ No Trade:</strong> ${marketConditions.no_trade_condition}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Bias Rules</h3>
        <p style="color: #d4e3f7; margin-bottom: 1.5rem;"><strong style="color: #a8c5ff;">${biasRules.general_rule}</strong></p>
        <div class="row mb-4">
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 1rem;">Bullish Bias</h5>
      `;
      
      biasRules.bullish_bias.conditions.forEach((cond) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${cond}</p>`;
      });
      
      html += `
              </div>
            </div>
          </div>
          
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #5a2d2d 0%, #3d1a1a 100%); border: 2px solid #9f4a4a;">
              <div class="card-body">
                <h5 style="color: #d5a8a8; font-weight: 700; margin-bottom: 1rem;">Bearish Bias</h5>
      `;
      
      biasRules.bearish_bias.conditions.forEach((cond) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${cond}</p>`;
      });
      
      html += `
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Pullback Definition (THE EDGE)</h3>
        <p style="color: #d4e3f7; margin-bottom: 1rem;"><strong style="color: #a8c5ff;">${pullbackDef.title}</strong> - ${pullbackDef.requirements}</p>
        <div class="row mb-4">
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-left: 4px solid #a8c5ff;">
              <div class="card-body">
                <h5 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Criteria</h5>
      `;
      
      pullbackDef.criteria.forEach((crit) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${crit}</p>`;
      });
      
      html += `
              </div>
            </div>
          </div>
          
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-left: 4px solid #a8d5a8;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 1rem;">Respect Levels</h5>
      `;
      
      pullbackDef.respect_levels.forEach((level) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">• ${level}</p>`;
      });
      
      html += `
                <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-top: 1rem; border-radius: 4px; border-top: 1px solid rgba(168,213,168,0.3);">
                  <p style="color: #d5a8a8; font-size: 0.85rem; margin: 0;"><strong>Exclusion:</strong> ${pullbackDef.exclusion_criteria}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Entry Rules</h3>
        <div class="row mb-4">
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 1rem;">LONG Pullback</h5>
                <p style="color: #a8c5ff; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.75rem;">Setup Conditions:</p>
      `;
      
      entryRules.long_pullback.setup_conditions.forEach((cond) => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;">✓ ${cond}</p>`;
      });
      
      html += `
                <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-top: 0.75rem; border-radius: 4px;">
                  <p style="color: #a8c5ff; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.5rem;">Entry Triggers:</p>
      `;
      
      entryRules.long_pullback.entry_triggers.forEach((trig) => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;">→ ${trig}</p>`;
      });
      
      html += `
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-lg-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #5a2d2d 0%, #3d1a1a 100%); border: 2px solid #9f4a4a;">
              <div class="card-body">
                <h5 style="color: #d5a8a8; font-weight: 700; margin-bottom: 1rem;">SHORT Pullback</h5>
                <p style="color: #d5c5a8; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.75rem;">Setup Conditions:</p>
      `;
      
      entryRules.short_pullback.setup_conditions.forEach((cond) => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;">✓ ${cond}</p>`;
      });
      
      html += `
                <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-top: 0.75rem; border-radius: 4px;">
                  <p style="color: #d5c5a8; font-size: 0.85rem; font-weight: 600; margin-bottom: 0.5rem;">Entry Triggers:</p>
      `;
      
      entryRules.short_pullback.entry_triggers.forEach((trig) => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;">→ ${trig}</p>`;
      });
      
      html += `
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Stop Loss Rules</h3>
        <p style="color: #d4e3f7; margin-bottom: 1rem;"><strong style="color: #a8c5ff;">${stopLoss.important_rule}</strong></p>
        <div class="row mb-4">
      `;
      
      stopLoss.options.forEach((option) => {
        html += `
          <div class="col-12 col-md-6 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
              <div class="card-body">
                <h5 style="color: #a8c5ff; font-weight: 700; margin-bottom: 0.5rem;">${option.type}</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;">${option.description}</p>
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Take Profit Targets</h3>
        <div class="row mb-4">
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 0.5rem;">Conservative</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong>Risk/Reward:</strong> ${tp.conservative.risk_reward}</p>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d4a5a 0%, #1a2d3d 100%); border: 2px solid #4a7a9f;">
              <div class="card-body">
                <h5 style="color: #a8c5ff; font-weight: 700; margin-bottom: 0.5rem;">Standard</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;"><strong>Risk/Reward:</strong> ${tp.standard.risk_reward}</p>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-left: 4px solid #a8d5a8;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 0.75rem;">Extended Targets</h5>
      `;
      
      tp.extended_targets.forEach((target) => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;">• ${target}</p>`;
      });
      
      html += `
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Trade Management</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
      `;
      
      tradeManagement.rules.forEach((rule) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">• ${rule}</p>`;
      });
      
      html += `
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Risk Management</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Risk per Trade:</strong> ${riskManagement.risk_per_trade}</p>
            <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Max Trades per Session:</strong> ${riskManagement.max_trades_per_session}</p>
            <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Stop Trading Rule:</strong> ${riskManagement.stop_trading_rule}</p>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">No Trade Conditions</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #5a2d2d 0%, #3d1a1a 100%); border-left: 4px solid #d5a8a8;">
          <div class="card-body">
      `;
      
      noTrade.forEach((condition) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✗ ${condition}</p>`;
      });
      
      html += `
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Example Trade</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
            <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
              <p style="color: #a8c5ff; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Direction:</strong> ${example.direction}</p>
              <p style="color: #a8d5a8; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Impulse Move:</strong> ${example.impulse_move.start} → ${example.impulse_move.end} (${example.impulse_move.length} points)</p>
              <p style="color: #a8d5a8; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Pullback Level:</strong> ${example.pullback_details.to_level} @ ${example.pullback_details.price} (${example.pullback_details.retrace_percentage}% retrace)</p>
              <p style="color: #a8c5ff; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Entry Trigger:</strong> ${example.entry.trigger} @ ${example.entry.price}</p>
              <p style="color: #d5a8a8; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Stop Loss:</strong> ${example.stop_loss.price} (${example.stop_loss.points} points)</p>
      `;
      
      example.take_profit.forEach((tp_item) => {
        html += `<p style="color: #a8d5a8; font-size: 0.9rem; margin-bottom: 0.3rem;"><strong>${tp_item.level}:</strong> ${tp_item.price} (${tp_item.risk_reward || tp_item.type})</p>`;
      });
      
      html += `
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Strategy Rationale</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
          <div class="card-body">
      `;
      
      rationale.why_this_works.forEach((reason) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">✓ ${reason}</p>`;
      });
      
      html += `
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Performance Metrics</h3>
        <div class="row mb-4">
          <div class="col-12 col-md-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d5a3d 0%, #1a3d2a 100%); border: 2px solid #4a9f6e;">
              <div class="card-body">
                <h5 style="color: #a8d5a8; font-weight: 700; margin-bottom: 0.5rem;">Win Rate</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;">${metrics.expected_win_rate}</p>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-md-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #2d4a5a 0%, #1a2d3d 100%); border: 2px solid #4a7a9f;">
              <div class="card-body">
                <h5 style="color: #a8c5ff; font-weight: 700; margin-bottom: 0.5rem;">Risk/Reward</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;">${metrics.average_risk_reward}</p>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-md-4 mb-3">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
              <div class="card-body">
                <h5 style="color: #a8c5ff; font-weight: 700; margin-bottom: 0.5rem;">Holding Time</h5>
                <p style="color: #d4e3f7; font-size: 0.9rem; margin: 0;">${metrics.typical_holding_time}</p>
              </div>
            </div>
          </div>
        </div>
        
        <h3 style="color: white; margin-top: 2rem; margin-bottom: 1.5rem;">Optional Enhancements</h3>
        <div class="card mb-4" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80;">
          <div class="card-body">
      `;
      
      enhancements.forEach((enhancement) => {
        html += `<p style="color: #d4e3f7; font-size: 0.9rem; margin-bottom: 0.5rem;">+ ${enhancement}</p>`;
      });
      
      html += `
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading Pullback Strategy. Please check if pullback.en.json exists.</p>';
      console.error('Error loading pullback strategy:', error);
    }
  }

  function loadPropfirms(section = '') {
    closeSidebarOnMobile();
    scrollToTop();
    const mainContent = document.querySelector('main');
    const title = 'Propfirms';
    
    if (section === 'overview') {
      loadPropfirmsOverview();
    } else {
      const contentMap = {
        'overview': '<h2>Overview</h2><p>Értékelési szakasz felépítése…</p>',
        'rules': '<h2>Rules</h2><p>Gyakori szabályok és buktatók…</p>',
        'tips': '<h2>Tips</h2><p>Tippek a sikeres teljesítéshez…</p>'
      };
      mainContent.innerHTML = contentMap[section] || `<h2>${title}</h2><p>Válassz egy témát a lenyílóból.</p>`;
    }
  }

  // Load Propfirms Overview with expandable cards
  async function loadPropfirmsOverview() {
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('acc.en.json');
      const data = await response.json();
      const overview = data.firm_overview;
      const instruments = data.instruments_and_assets;
      const leverage = data.leverage;
      const commissions = data.commissions;
      const consistency = data.consistency_rules;
      const firmRules = data.firm_rules;
      const maxLotSizes = data.maximum_lot_sizes;
      const payoutPolicy = data.payout_policy;
      const accountTypes = data.account_types_summary;
      
      let html = `
        <h1 class="mb-4">Trading Firms</h1>
        <p class="text-muted mb-4">Explore trading firms and their details. Click to expand.</p>
        
        <div class="row" id="firmCardsContainer">
      `;
      
      // Create expandable card for the firm
      html += `
        <div class="col-12 mb-4">
          <div class="card firm-card" style="background: linear-gradient(135deg, #2d4a5a 0%, #1a2d3d 100%); border: 2px solid #4a7a9f; cursor: pointer; overflow: hidden;">
            <div class="card-header firm-card-header" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-bottom: 2px solid #4a7a9f; padding: 1.5rem; display: flex; align-items: center; gap: 1rem; cursor: pointer;" onclick="toggleFirmCard(this)">
              <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #a8c5ff 0%, #4a7a9f 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; font-size: 1.2rem;">
                ACG
              </div>
              <div style="flex: 1;">
                <h5 style="color: #a8c5ff; margin: 0; font-weight: 700;">${overview.name}</h5>
                <p style="color: #d4e3f7; margin: 0; font-size: 0.9rem;">${overview.broker}</p>
              </div>
              <i class="bi bi-chevron-down" style="color: #a8c5ff; font-size: 1.5rem; transition: transform 0.3s ease;"></i>
            </div>
            
            <div class="firm-card-content" style="max-height: 0; overflow: hidden; transition: max-height 0.4s ease;">
              <div class="card-body" style="padding: 1.5rem;">
                <!-- Firm Overview -->
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Trading Details</h6>
                  <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Platforms:</strong> ${overview.platforms.join(', ')}</p>
                  <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Payment Methods:</strong> ${overview.payment_methods.join(', ')}</p>
                  <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Payout Methods:</strong> ${overview.payout_methods.join(', ')}</p>
                </div>
                
                <!-- Instruments and Assets -->
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Instruments & Assets</h6>
                  <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Type:</strong> ${instruments.instrument_type}</p>
                  <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Assets:</strong> ${instruments.assets.join(', ')}</p>
                </div>
                
                <!-- Leverage Table -->
                <div style="margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Leverage by Asset Class</h6>
                  <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; background: rgba(255,255,255,0.02);">
                      <thead>
                        <tr style="border-bottom: 2px solid #4a7a9f;">
                          <th style="padding: 0.75rem; text-align: left; color: #a8c5ff; font-weight: 700; border-right: 1px solid rgba(74,122,159,0.3);">Asset</th>
                          <th style="padding: 0.75rem; text-align: center; color: #a8c5ff; font-weight: 700; border-right: 1px solid rgba(74,122,159,0.3);">Instant</th>
                          <th style="padding: 0.75rem; text-align: center; color: #a8c5ff; font-weight: 700; border-right: 1px solid rgba(74,122,159,0.3);">1 Step</th>
                          <th style="padding: 0.75rem; text-align: center; color: #a8c5ff; font-weight: 700; border-right: 1px solid rgba(74,122,159,0.3);">2 Steps</th>
                          <th style="padding: 0.75rem; text-align: center; color: #a8c5ff; font-weight: 700;">3 Steps</th>
                        </tr>
                      </thead>
                      <tbody>
      `;
      
      leverage.assets.forEach((asset, idx) => {
        html += `
                        <tr style="border-bottom: 1px solid rgba(74,122,159,0.2); ${idx % 2 === 0 ? 'background: rgba(74,122,159,0.05);' : ''}">
                          <td style="padding: 0.75rem; color: #d4e3f7; border-right: 1px solid rgba(74,122,159,0.3); font-weight: 600;">${asset.asset}</td>
                          <td style="padding: 0.75rem; text-align: center; color: #d4e3f7; border-right: 1px solid rgba(74,122,159,0.3);">${asset.instant}</td>
                          <td style="padding: 0.75rem; text-align: center; color: #a8d5a8; border-right: 1px solid rgba(74,122,159,0.3); font-weight: 600;">${asset['1_step']}</td>
                          <td style="padding: 0.75rem; text-align: center; color: #a8c5ff; border-right: 1px solid rgba(74,122,159,0.3); font-weight: 600;">${asset['2_steps']}</td>
                          <td style="padding: 0.75rem; text-align: center; color: #d5a8a8; font-weight: 600;">${asset['3_steps']}</td>
                        </tr>
        `;
      });
      
      html += `
                      </tbody>
                    </table>
                  </div>
                </div>
                
                <!-- Commissions -->
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Commissions</h6>
                  <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">FX Raw:</strong> ${commissions.fx.raw} | <strong>Standard:</strong> ${commissions.fx.standard}</p>
                  <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Metals Raw:</strong> ${commissions.metals.raw} | <strong>Standard:</strong> ${commissions.metals.standard}</p>
                  <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Indices:</strong> ${commissions.indices}</p>
                  <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Energy:</strong> ${commissions.energy}</p>
                </div>
                
                <!-- Consistency Rules -->
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Consistency Rules</h6>
                  <p style="color: #d4e3f7; margin-bottom: 0.5rem;"><strong style="color: #a8c5ff;">Consistency Rule:</strong> ${consistency.on_demand_payout_requirements.consistency_rule}</p>
                  <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Minimum Gross Profit:</strong> ${consistency.on_demand_payout_requirements.minimum_gross_profit}</p>
                </div>
                
                <!-- Firm Rules -->
                <div style="margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Firm Rules</h6>
                  <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 0.75rem;">
                    <p style="color: #d5a8a8; font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem;"><strong>Inactivity Rule:</strong> ${firmRules.inactivity_rule.description}</p>
                    <p style="color: #d4e3f7; font-size: 0.85rem; margin: 0;">⚠ ${firmRules.inactivity_rule.consequences[0]}</p>
                  </div>
                  <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 0.75rem;">
                    <p style="color: #d5a8a8; font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem;"><strong>All or Nothing:</strong> ${firmRules.all_or_nothing.description}</p>
                  </div>
                  <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 0.75rem;">
                    <p style="color: #a8c5ff; font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem;"><strong>Avg Trade Duration:</strong> Minimum ${firmRules.average_trade_duration.minimum_duration}</p>
                    <p style="color: #d4e3f7; font-size: 0.85rem; margin: 0;">• At least 50% of profit must come from trades exceeding 2 minutes</p>
                  </div>
                  <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 0.75rem;">
                    <p style="color: #d5a8a8; font-size: 0.9rem; font-weight: 600; margin: 0;"><strong>Order Block Spamming:</strong> ${firmRules.order_block_spamming.description}</p>
                  </div>
                  <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 0.75rem;">
                    <p style="color: #d4e3f7; font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem;"><strong>Risk Management:</strong> ${firmRules.risk_management.rule}</p>
                  </div>
                </div>
                
                <!-- Maximum Lot Sizes -->
                <div style="margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Maximum Lot Sizes</h6>
                  <div class="row">
                    <div class="col-12 col-lg-6 mb-3">
                      <div style="background: rgba(168,197,255,0.1); padding: 1rem; border-radius: 5px; border-left: 3px solid #a8c5ff;">
                        <p style="color: #a8c5ff; font-weight: 600; margin-bottom: 0.75rem;">Alpha Swing Funded</p>
      `;
      
      maxLotSizes.alpha_swing.forEach(item => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;"><strong>${item.account_size}:</strong> ${item.max_lots} lots</p>`;
      });
      
      html += `
                      </div>
                    </div>
                    <div class="col-12 col-lg-6 mb-3">
                      <div style="background: rgba(168,213,168,0.1); padding: 1rem; border-radius: 5px; border-left: 3px solid #a8d5a8;">
                        <p style="color: #a8d5a8; font-weight: 600; margin-bottom: 0.75rem;">Alpha One/Pro/Three Funded</p>
      `;
      
      maxLotSizes.alpha_one_pro_6_8_10_three.forEach(item => {
        html += `<p style="color: #d4e3f7; font-size: 0.85rem; margin-bottom: 0.3rem;"><strong>${item.account_size}:</strong> ${item.max_lots} lots</p>`;
      });
      
      html += `
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Payout Policy -->
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem;">
                  <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Payout Policy</h6>
                  <p style="color: #d4e3f7; margin-bottom: 0.75rem;"><strong style="color: #a8c5ff;">Biweekly Payout:</strong> ${payoutPolicy.available_options.biweekly_payout.join(', ')}</p>
                  <p style="color: #d4e3f7; margin-bottom: 0.75rem;"><strong style="color: #a8c5ff;">2% On Demand:</strong> ${payoutPolicy.available_options.two_percent_on_demand.join(', ')}</p>
                  <p style="color: #d4e3f7; margin-bottom: 0.75rem;"><strong style="color: #a8c5ff;">Best Day Rule:</strong> ${payoutPolicy.two_percent_on_demand_details.best_day_rule}</p>
                  <p style="color: #d4e3f7; margin: 0;"><strong style="color: #a8c5ff;">Minimum Withdrawal:</strong> ${payoutPolicy.biweekly_payout_details.minimum_withdrawal}</p>
                </div>
                
                <!-- Account Types Summary -->
                <h6 style="color: #a8c5ff; font-weight: 700; margin-bottom: 1rem;">Account Types Summary</h6>
                <div class="row">
      `;
      
      Object.entries(accountTypes).forEach(([key, value]) => {
        const displayName = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        html += `
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <div style="background: rgba(168,197,255,0.1); padding: 0.75rem; border-radius: 5px; border-left: 3px solid #a8c5ff;">
              <p style="color: #a8c5ff; font-size: 0.85rem; font-weight: 700; margin-bottom: 0.5rem;">${displayName}</p>
              <p style="color: #d4e3f7; font-size: 0.8rem; margin: 0;">
        `;
        
        if (typeof value === 'object') {
          Object.entries(value).forEach(([k, v]) => {
            const label = k.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            const val = Array.isArray(v) ? v.join(', ') : v;
            html += `<strong>${label}:</strong> ${val}<br>`;
          });
        }
        html += `
              </p>
            </div>
          </div>
        `;
      });
      
      html += `
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
      
      mainContent.innerHTML = html;
      
      // Add CSS for animation
      const style = document.createElement('style');
      style.innerHTML = `
        .firm-card-header {
          transition: background 0.3s ease;
        }
        .firm-card-header:hover {
          background: linear-gradient(135deg, #2a4a7a 0%, #1a3a7a 100%) !important;
        }
        .firm-card-header i {
          transition: transform 0.3s ease;
        }
        .firm-card-header.expanded i {
          transform: rotate(180deg);
        }
        .firm-card-content table {
          font-size: 0.9rem;
        }
      `;
      document.head.appendChild(style);
      
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading Propfirms Overview. Please check if acc.en.json exists.</p>';
      console.error('Error loading propfirms overview:', error);
    }
  }

  // Toggle firm card expansion
  function toggleFirmCard(headerElement) {
    const contentElement = headerElement.nextElementSibling;
    const isExpanded = headerElement.classList.contains('expanded');
    
    if (isExpanded) {
      // Collapse
      contentElement.style.maxHeight = '0';
      headerElement.classList.remove('expanded');
    } else {
      // Expand
      contentElement.style.maxHeight = contentElement.scrollHeight + 'px';
      headerElement.classList.add('expanded');
    }
  }

  // Load lexicon from JSON
  async function loadLexicon() {
    closeSidebarOnMobile();
    scrollToTop();
    const mainContent = document.querySelector('main');
    
    try {
      const response = await fetch('lexicon.en.json');
      const lexicon = await response.json();
      
      // Sort entries alphabetically
      const sortedEntries = Object.entries(lexicon).sort((a, b) => a[0].localeCompare(b[0]));
      
      let html = `
        <h1 class="mb-4">Trading Lexicon</h1>
        <p class="text-muted mb-4">A comprehensive glossary of trading and financial terms.</p>
        
        <div class="input-group mb-4" style="max-width: 400px;">
          <input 
            type="text" 
            class="form-control" 
            id="lexiconSearch" 
            placeholder="Search terms..." 
            style="background-color: #1e3c72; color: #d4e3f7; border: 1px solid #3d5a80;"
          >
          <span class="input-group-text" style="background-color: #1e3c72; border: 1px solid #3d5a80; color: #6ba3d4;">
            <i class="bi bi-search"></i>
          </span>
        </div>
        
        <div class="row">
      `;
      
      sortedEntries.forEach(([term, definition]) => {
        html += `
          <div class="col-12 col-md-6 col-lg-4 mb-3 lexicon-entry" data-term="${term.toLowerCase()}">
            <div class="card h-100" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border: 1px solid #3d5a80; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
              <div class="card-body">
                <h5 class="card-title" style="color: #fff; font-weight: 600;">${term}</h5>
                <p class="card-text" style="font-size: 0.9rem; color: #d4e3f7; line-height: 1.5;">${definition}</p>
              </div>
            </div>
          </div>
        `;
      });
      
      html += `
        </div>
      `;
      
      mainContent.innerHTML = html;
      
      // Add search functionality
      const searchInput = document.getElementById('lexiconSearch');
      searchInput.addEventListener('keyup', function() {
        const searchTerm = this.value.toLowerCase();
        const entries = document.querySelectorAll('.lexicon-entry');
        
        entries.forEach(entry => {
          const term = entry.getAttribute('data-term');
          if (term.includes(searchTerm)) {
            entry.style.display = '';
          } else {
            entry.style.display = 'none';
          }
        });
      });
    } catch (error) {
      mainContent.innerHTML = '<p class="text-danger">Error loading lexicon. Please check if lexicon.en.json exists.</p>';
      console.error('Error loading lexicon:', error);
    }
  }
</script>
    
</body>
</html>
